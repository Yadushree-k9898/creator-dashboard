import{h as pt,r as a,a6 as mt,a7 as he,j as s,T as Y,Q,V as I,a9 as N,ag as xe,W as vt,i as F,ah as ht,s as K,B as H,R as k,aa as ye,ai as xt,a4 as V,a5 as we,aj as yt,ak as wt,al as Et,d as Rt,u as bt,C as gt,a as Tt,b as Ct,c as Pt,am as Nt,an as St,F as jt,ao as It,ap as Dt,aq as _t}from"./index-ngraWT3L.js";import{m as Ee,R as At,I as Ft,u as Ot,D as Lt,d as kt,e as Mt,f as Vt,g as Bt,h as Wt,i as Kt,B as $t,S as Ht}from"./textarea-DRWi7ctV.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ut=pt("external-link",Gt);var ie="Radio",[qt,Re]=Y(ie),[zt,Xt]=qt(ie),be=a.forwardRef((e,t)=>{const{__scopeRadio:r,name:o,checked:n=!1,required:c,disabled:l,value:d="on",onCheck:p,form:i,...m}=e,[x,E]=a.useState(null),w=I(t,u=>E(u)),g=a.useRef(!1),v=x?i||!!x.closest("form"):!0;return s.jsxs(zt,{scope:r,checked:n,disabled:l,children:[s.jsx(Q.button,{type:"button",role:"radio","aria-checked":n,"data-state":Pe(n),"data-disabled":l?"":void 0,disabled:l,value:d,...m,ref:w,onClick:N(e.onClick,u=>{n||p==null||p(),v&&(g.current=u.isPropagationStopped(),g.current||u.stopPropagation())})}),v&&s.jsx(Ce,{control:x,bubbles:!g.current,name:o,value:d,checked:n,required:c,disabled:l,form:i,style:{transform:"translateX(-100%)"}})]})});be.displayName=ie;var ge="RadioIndicator",Te=a.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:o,...n}=e,c=Xt(ge,r);return s.jsx(xe,{present:o||c.checked,children:s.jsx(Q.span,{"data-state":Pe(c.checked),"data-disabled":c.disabled?"":void 0,...n,ref:t})})});Te.displayName=ge;var Yt="RadioBubbleInput",Ce=a.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:o=!0,...n},c)=>{const l=a.useRef(null),d=I(l,c),p=Ot(r),i=vt(t);return a.useEffect(()=>{const m=l.current;if(!m)return;const x=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(x,"checked").set;if(p!==r&&w){const g=new Event("click",{bubbles:o});w.call(m,r),m.dispatchEvent(g)}},[p,r,o]),s.jsx(Q.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:d,style:{...n.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ce.displayName=Yt;function Pe(e){return e?"checked":"unchecked"}var Qt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Z="RadioGroup",[Zt,Ur]=Y(Z,[Ee,Re]),Ne=Ee(),Se=Re(),[Jt,er]=Zt(Z),je=a.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:o,defaultValue:n,value:c,required:l=!1,disabled:d=!1,orientation:p,dir:i,loop:m=!0,onValueChange:x,...E}=e,w=Ne(r),g=mt(i),[v,u]=he({prop:c,defaultProp:n??"",onChange:x,caller:Z});return s.jsx(Jt,{scope:r,name:o,required:l,disabled:d,value:v,onValueChange:u,children:s.jsx(At,{asChild:!0,...w,orientation:p,dir:g,loop:m,children:s.jsx(Q.div,{role:"radiogroup","aria-required":l,"aria-orientation":p,"data-disabled":d?"":void 0,dir:g,...E,ref:t})})})});je.displayName=Z;var Ie="RadioGroupItem",De=a.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:o,...n}=e,c=er(Ie,r),l=c.disabled||o,d=Ne(r),p=Se(r),i=a.useRef(null),m=I(t,i),x=c.value===n.value,E=a.useRef(!1);return a.useEffect(()=>{const w=v=>{Qt.includes(v.key)&&(E.current=!0)},g=()=>E.current=!1;return document.addEventListener("keydown",w),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",w),document.removeEventListener("keyup",g)}},[]),s.jsx(Ft,{asChild:!0,...d,focusable:!l,active:x,children:s.jsx(be,{disabled:l,required:c.required,checked:x,...p,...n,name:c.name,ref:m,onCheck:()=>c.onValueChange(n.value),onKeyDown:N(w=>{w.key==="Enter"&&w.preventDefault()}),onFocus:N(n.onFocus,()=>{var w;E.current&&((w=i.current)==null||w.click())})})})});De.displayName=Ie;var tr="RadioGroupIndicator",_e=a.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...o}=e,n=Se(r);return s.jsx(Te,{...n,...o,ref:t})});_e.displayName=tr;var Ae=je,Fe=De,rr=_e;const Oe=a.forwardRef(({className:e,...t},r)=>s.jsx(Ae,{className:F("grid gap-2",e),...t,ref:r}));Oe.displayName=Ae.displayName;const $=a.forwardRef(({className:e,...t},r)=>s.jsx(Fe,{ref:r,className:F("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(rr,{className:"flex items-center justify-center",children:s.jsx(ht,{className:"h-2.5 w-2.5 fill-current text-current"})})}));$.displayName=Fe.displayName;const sr=({isOpen:e,onClose:t,onConfirm:r,post:o})=>{const[n,c]=a.useState("inappropriate"),[l,d]=a.useState(""),p=()=>{r(n==="other"?l:n)};return s.jsx(Lt,{open:e,onOpenChange:t,children:s.jsxs(kt,{className:"sm:max-w-[425px]",children:[s.jsxs(Mt,{children:[s.jsx(Vt,{children:"Report Content"}),s.jsx(Bt,{children:"Please let us know why you're reporting this content."})]}),s.jsxs("div",{className:"py-4",children:[s.jsxs("h3",{className:"font-medium mb-2 text-sm",children:["Post: ",o==null?void 0:o.title]}),s.jsxs(Oe,{defaultValue:"inappropriate",value:n,onValueChange:c,className:"mt-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx($,{value:"inappropriate",id:"inappropriate"}),s.jsx(K,{htmlFor:"inappropriate",children:"Inappropriate content"})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx($,{value:"spam",id:"spam"}),s.jsx(K,{htmlFor:"spam",children:"Spam"})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx($,{value:"misinformation",id:"misinformation"}),s.jsx(K,{htmlFor:"misinformation",children:"Misinformation"})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx($,{value:"other",id:"other"}),s.jsx(K,{htmlFor:"other",children:"Other"})]})]}),n==="other"&&s.jsxs("div",{className:"mt-4",children:[s.jsx(K,{htmlFor:"otherReason",children:"Please specify:"}),s.jsx(Wt,{id:"otherReason",value:l,onChange:i=>d(i.target.value),placeholder:"Please provide details...",className:"mt-1"})]})]}),s.jsxs(Kt,{children:[s.jsx(H,{variant:"outline",onClick:t,children:"Cancel"}),s.jsx(H,{onClick:p,children:"Submit Report"})]})]})})};function re(e){const t=or(e),r=a.forwardRef((o,n)=>{const{children:c,...l}=o,d=a.Children.toArray(c),p=d.find(ar);if(p){const i=p.props.children,m=d.map(x=>x===p?a.Children.count(i)>1?a.Children.only(null):a.isValidElement(i)?i.props.children:null:x);return s.jsx(t,{...l,ref:n,children:a.isValidElement(i)?a.cloneElement(i,void 0,m):null})}return s.jsx(t,{...l,ref:n,children:c})});return r.displayName=`${e}.Slot`,r}function or(e){const t=a.forwardRef((r,o)=>{const{children:n,...c}=r,l=a.isValidElement(n)?cr(n):void 0,d=I(l,o);if(a.isValidElement(n)){const p=ir(c,n.props);return n.type!==a.Fragment&&(p.ref=d),a.cloneElement(n,p)}return a.Children.count(n)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var nr=Symbol("radix.slottable");function ar(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===nr}function ir(e,t){const r={...t};for(const o in t){const n=e[o],c=t[o];/^on[A-Z]/.test(o)?n&&c?r[o]=(...d)=>{const p=c(...d);return n(...d),p}:n&&(r[o]=n):o==="style"?r[o]={...n,...c}:o==="className"&&(r[o]=[n,c].filter(Boolean).join(" "))}return{...e,...r}}function cr(e){var o,n;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function lr(e){const t=e+"CollectionProvider",[r,o]=Y(t),[n,c]=r(t,{collectionRef:{current:null},itemMap:new Map}),l=v=>{const{scope:u,children:T}=v,f=k.useRef(null),y=k.useRef(new Map).current;return s.jsx(n,{scope:u,itemMap:y,collectionRef:f,children:T})};l.displayName=t;const d=e+"CollectionSlot",p=re(d),i=k.forwardRef((v,u)=>{const{scope:T,children:f}=v,y=c(d,T),b=I(u,y.collectionRef);return s.jsx(p,{ref:b,children:f})});i.displayName=d;const m=e+"CollectionItemSlot",x="data-radix-collection-item",E=re(m),w=k.forwardRef((v,u)=>{const{scope:T,children:f,...y}=v,b=k.useRef(null),P=I(u,b),C=c(m,T);return k.useEffect(()=>(C.itemMap.set(b,{ref:b,...y}),()=>void C.itemMap.delete(b))),s.jsx(E,{[x]:"",ref:P,children:f})});w.displayName=m;function g(v){const u=c(e+"CollectionConsumer",v);return k.useCallback(()=>{const f=u.collectionRef.current;if(!f)return[];const y=Array.from(f.querySelectorAll(`[${x}]`));return Array.from(u.itemMap.values()).sort((C,R)=>y.indexOf(C.ref.current)-y.indexOf(R.ref.current))},[u.collectionRef,u.itemMap])}return[{Provider:l,Slot:i,ItemSlot:w},g,o]}var dr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],D=dr.reduce((e,t)=>{const r=re(`Primitive.${t}`),o=a.forwardRef((n,c)=>{const{asChild:l,...d}=n,p=l?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(p,{...d,ref:c})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{});function Le(e,t){e&&ye.flushSync(()=>e.dispatchEvent(t))}var ur="DismissableLayer",se="dismissableLayer.update",fr="dismissableLayer.pointerDownOutside",pr="dismissableLayer.focusOutside",pe,ke=a.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Me=a.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:o,onPointerDownOutside:n,onFocusOutside:c,onInteractOutside:l,onDismiss:d,...p}=e,i=a.useContext(ke),[m,x]=a.useState(null),E=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=a.useState({}),g=I(t,R=>x(R)),v=Array.from(i.layers),[u]=[...i.layersWithOutsidePointerEventsDisabled].slice(-1),T=v.indexOf(u),f=m?v.indexOf(m):-1,y=i.layersWithOutsidePointerEventsDisabled.size>0,b=f>=T,P=vr(R=>{const j=R.target,_=[...i.branches].some(O=>O.contains(j));!b||_||(n==null||n(R),l==null||l(R),R.defaultPrevented||d==null||d())},E),C=hr(R=>{const j=R.target;[...i.branches].some(O=>O.contains(j))||(c==null||c(R),l==null||l(R),R.defaultPrevented||d==null||d())},E);return xt(R=>{f===i.layers.size-1&&(o==null||o(R),!R.defaultPrevented&&d&&(R.preventDefault(),d()))},E),a.useEffect(()=>{if(m)return r&&(i.layersWithOutsidePointerEventsDisabled.size===0&&(pe=E.body.style.pointerEvents,E.body.style.pointerEvents="none"),i.layersWithOutsidePointerEventsDisabled.add(m)),i.layers.add(m),me(),()=>{r&&i.layersWithOutsidePointerEventsDisabled.size===1&&(E.body.style.pointerEvents=pe)}},[m,E,r,i]),a.useEffect(()=>()=>{m&&(i.layers.delete(m),i.layersWithOutsidePointerEventsDisabled.delete(m),me())},[m,i]),a.useEffect(()=>{const R=()=>w({});return document.addEventListener(se,R),()=>document.removeEventListener(se,R)},[]),s.jsx(D.div,{...p,ref:g,style:{pointerEvents:y?b?"auto":"none":void 0,...e.style},onFocusCapture:N(e.onFocusCapture,C.onFocusCapture),onBlurCapture:N(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:N(e.onPointerDownCapture,P.onPointerDownCapture)})});Me.displayName=ur;var mr="DismissableLayerBranch",Ve=a.forwardRef((e,t)=>{const r=a.useContext(ke),o=a.useRef(null),n=I(t,o);return a.useEffect(()=>{const c=o.current;if(c)return r.branches.add(c),()=>{r.branches.delete(c)}},[r.branches]),s.jsx(D.div,{...e,ref:n})});Ve.displayName=mr;function vr(e,t=globalThis==null?void 0:globalThis.document){const r=V(e),o=a.useRef(!1),n=a.useRef(()=>{});return a.useEffect(()=>{const c=d=>{if(d.target&&!o.current){let p=function(){Be(fr,r,i,{discrete:!0})};const i={originalEvent:d};d.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=p,t.addEventListener("click",n.current,{once:!0})):p()}else t.removeEventListener("click",n.current);o.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",c),t.removeEventListener("click",n.current)}},[t,r]),{onPointerDownCapture:()=>o.current=!0}}function hr(e,t=globalThis==null?void 0:globalThis.document){const r=V(e),o=a.useRef(!1);return a.useEffect(()=>{const n=c=>{c.target&&!o.current&&Be(pr,r,{originalEvent:c},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,r]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function me(){const e=new CustomEvent(se);document.dispatchEvent(e)}function Be(e,t,r,{discrete:o}){const n=r.originalEvent.target,c=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&n.addEventListener(e,t,{once:!0}),o?Le(n,c):n.dispatchEvent(c)}var xr=Me,yr=Ve,wr="Portal",We=a.forwardRef((e,t)=>{var d;const{container:r,...o}=e,[n,c]=a.useState(!1);we(()=>c(!0),[]);const l=r||n&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return l?yt.createPortal(s.jsx(D.div,{...o,ref:t}),l):null});We.displayName=wr;var Er=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Rr="VisuallyHidden",ce=a.forwardRef((e,t)=>s.jsx(D.span,{...e,ref:t,style:{...Er,...e.style}}));ce.displayName=Rr;var le="ToastProvider",[de,br,gr]=lr("Toast"),[Ke,qr]=Y("Toast",[gr]),[Tr,J]=Ke(le),$e=e=>{const{__scopeToast:t,label:r="Notification",duration:o=5e3,swipeDirection:n="right",swipeThreshold:c=50,children:l}=e,[d,p]=a.useState(null),[i,m]=a.useState(0),x=a.useRef(!1),E=a.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${le}\`. Expected non-empty \`string\`.`),s.jsx(de.Provider,{scope:t,children:s.jsx(Tr,{scope:t,label:r,duration:o,swipeDirection:n,swipeThreshold:c,toastCount:i,viewport:d,onViewportChange:p,onToastAdd:a.useCallback(()=>m(w=>w+1),[]),onToastRemove:a.useCallback(()=>m(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:x,isClosePausedRef:E,children:l})})};$e.displayName=le;var He="ToastViewport",Cr=["F8"],oe="toast.viewportPause",ne="toast.viewportResume",Ge=a.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:o=Cr,label:n="Notifications ({hotkey})",...c}=e,l=J(He,r),d=br(r),p=a.useRef(null),i=a.useRef(null),m=a.useRef(null),x=a.useRef(null),E=I(t,x,l.onViewportChange),w=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=l.toastCount>0;a.useEffect(()=>{const u=T=>{var y;o.length!==0&&o.every(b=>T[b]||T.code===b)&&((y=x.current)==null||y.focus())};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[o]),a.useEffect(()=>{const u=p.current,T=x.current;if(g&&u&&T){const f=()=>{if(!l.isClosePausedRef.current){const C=new CustomEvent(oe);T.dispatchEvent(C),l.isClosePausedRef.current=!0}},y=()=>{if(l.isClosePausedRef.current){const C=new CustomEvent(ne);T.dispatchEvent(C),l.isClosePausedRef.current=!1}},b=C=>{!u.contains(C.relatedTarget)&&y()},P=()=>{u.contains(document.activeElement)||y()};return u.addEventListener("focusin",f),u.addEventListener("focusout",b),u.addEventListener("pointermove",f),u.addEventListener("pointerleave",P),window.addEventListener("blur",f),window.addEventListener("focus",y),()=>{u.removeEventListener("focusin",f),u.removeEventListener("focusout",b),u.removeEventListener("pointermove",f),u.removeEventListener("pointerleave",P),window.removeEventListener("blur",f),window.removeEventListener("focus",y)}}},[g,l.isClosePausedRef]);const v=a.useCallback(({tabbingDirection:u})=>{const f=d().map(y=>{const b=y.ref.current,P=[b,...Mr(b)];return u==="forwards"?P:P.reverse()});return(u==="forwards"?f.reverse():f).flat()},[d]);return a.useEffect(()=>{const u=x.current;if(u){const T=f=>{var P,C,R;const y=f.altKey||f.ctrlKey||f.metaKey;if(f.key==="Tab"&&!y){const j=document.activeElement,_=f.shiftKey;if(f.target===u&&_){(P=i.current)==null||P.focus();return}const L=v({tabbingDirection:_?"backwards":"forwards"}),U=L.findIndex(h=>h===j);te(L.slice(U+1))?f.preventDefault():_?(C=i.current)==null||C.focus():(R=m.current)==null||R.focus()}};return u.addEventListener("keydown",T),()=>u.removeEventListener("keydown",T)}},[d,v]),s.jsxs(yr,{ref:p,role:"region","aria-label":n.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&s.jsx(ae,{ref:i,onFocusFromOutsideViewport:()=>{const u=v({tabbingDirection:"forwards"});te(u)}}),s.jsx(de.Slot,{scope:r,children:s.jsx(D.ol,{tabIndex:-1,...c,ref:E})}),g&&s.jsx(ae,{ref:m,onFocusFromOutsideViewport:()=>{const u=v({tabbingDirection:"backwards"});te(u)}})]})});Ge.displayName=He;var Ue="ToastFocusProxy",ae=a.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:o,...n}=e,c=J(Ue,r);return s.jsx(ce,{"aria-hidden":!0,tabIndex:0,...n,ref:t,style:{position:"fixed"},onFocus:l=>{var i;const d=l.relatedTarget;!((i=c.viewport)!=null&&i.contains(d))&&o()}})});ae.displayName=Ue;var G="Toast",Pr="toast.swipeStart",Nr="toast.swipeMove",Sr="toast.swipeCancel",jr="toast.swipeEnd",qe=a.forwardRef((e,t)=>{const{forceMount:r,open:o,defaultOpen:n,onOpenChange:c,...l}=e,[d,p]=he({prop:o,defaultProp:n??!0,onChange:c,caller:G});return s.jsx(xe,{present:r||d,children:s.jsx(_r,{open:d,...l,ref:t,onClose:()=>p(!1),onPause:V(e.onPause),onResume:V(e.onResume),onSwipeStart:N(e.onSwipeStart,i=>{i.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:N(e.onSwipeMove,i=>{const{x:m,y:x}=i.detail.delta;i.currentTarget.setAttribute("data-swipe","move"),i.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),i.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${x}px`)}),onSwipeCancel:N(e.onSwipeCancel,i=>{i.currentTarget.setAttribute("data-swipe","cancel"),i.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),i.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),i.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),i.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:N(e.onSwipeEnd,i=>{const{x:m,y:x}=i.detail.delta;i.currentTarget.setAttribute("data-swipe","end"),i.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),i.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),i.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),i.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${x}px`),p(!1)})})})});qe.displayName=G;var[Ir,Dr]=Ke(G,{onClose(){}}),_r=a.forwardRef((e,t)=>{const{__scopeToast:r,type:o="foreground",duration:n,open:c,onClose:l,onEscapeKeyDown:d,onPause:p,onResume:i,onSwipeStart:m,onSwipeMove:x,onSwipeCancel:E,onSwipeEnd:w,...g}=e,v=J(G,r),[u,T]=a.useState(null),f=I(t,h=>T(h)),y=a.useRef(null),b=a.useRef(null),P=n||v.duration,C=a.useRef(0),R=a.useRef(P),j=a.useRef(0),{onToastAdd:_,onToastRemove:O}=v,M=V(()=>{var S;(u==null?void 0:u.contains(document.activeElement))&&((S=v.viewport)==null||S.focus()),l()}),L=a.useCallback(h=>{!h||h===1/0||(window.clearTimeout(j.current),C.current=new Date().getTime(),j.current=window.setTimeout(M,h))},[M]);a.useEffect(()=>{const h=v.viewport;if(h){const S=()=>{L(R.current),i==null||i()},A=()=>{const B=new Date().getTime()-C.current;R.current=R.current-B,window.clearTimeout(j.current),p==null||p()};return h.addEventListener(oe,A),h.addEventListener(ne,S),()=>{h.removeEventListener(oe,A),h.removeEventListener(ne,S)}}},[v.viewport,P,p,i,L]),a.useEffect(()=>{c&&!v.isClosePausedRef.current&&L(P)},[c,P,v.isClosePausedRef,L]),a.useEffect(()=>(_(),()=>O()),[_,O]);const U=a.useMemo(()=>u?et(u):null,[u]);return v.viewport?s.jsxs(s.Fragment,{children:[U&&s.jsx(Ar,{__scopeToast:r,role:"status","aria-live":o==="foreground"?"assertive":"polite","aria-atomic":!0,children:U}),s.jsx(Ir,{scope:r,onClose:M,children:ye.createPortal(s.jsx(de.ItemSlot,{scope:r,children:s.jsx(xr,{asChild:!0,onEscapeKeyDown:N(d,()=>{v.isFocusedToastEscapeKeyDownRef.current||M(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(D.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":c?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:f,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:N(e.onKeyDown,h=>{h.key==="Escape"&&(d==null||d(h.nativeEvent),h.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:N(e.onPointerDown,h=>{h.button===0&&(y.current={x:h.clientX,y:h.clientY})}),onPointerMove:N(e.onPointerMove,h=>{if(!y.current)return;const S=h.clientX-y.current.x,A=h.clientY-y.current.y,B=!!b.current,W=["left","right"].includes(v.swipeDirection),q=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,ut=W?q(0,S):0,ft=W?0:q(0,A),ee=h.pointerType==="touch"?10:2,z={x:ut,y:ft},fe={originalEvent:h,delta:z};B?(b.current=z,X(Nr,x,fe,{discrete:!1})):ve(z,v.swipeDirection,ee)?(b.current=z,X(Pr,m,fe,{discrete:!1}),h.target.setPointerCapture(h.pointerId)):(Math.abs(S)>ee||Math.abs(A)>ee)&&(y.current=null)}),onPointerUp:N(e.onPointerUp,h=>{const S=b.current,A=h.target;if(A.hasPointerCapture(h.pointerId)&&A.releasePointerCapture(h.pointerId),b.current=null,y.current=null,S){const B=h.currentTarget,W={originalEvent:h,delta:S};ve(S,v.swipeDirection,v.swipeThreshold)?X(jr,w,W,{discrete:!0}):X(Sr,E,W,{discrete:!0}),B.addEventListener("click",q=>q.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),Ar=e=>{const{__scopeToast:t,children:r,...o}=e,n=J(G,t),[c,l]=a.useState(!1),[d,p]=a.useState(!1);return Lr(()=>l(!0)),a.useEffect(()=>{const i=window.setTimeout(()=>p(!0),1e3);return()=>window.clearTimeout(i)},[]),d?null:s.jsx(We,{asChild:!0,children:s.jsx(ce,{...o,children:c&&s.jsxs(s.Fragment,{children:[n.label," ",r]})})})},Fr="ToastTitle",ze=a.forwardRef((e,t)=>{const{__scopeToast:r,...o}=e;return s.jsx(D.div,{...o,ref:t})});ze.displayName=Fr;var Or="ToastDescription",Xe=a.forwardRef((e,t)=>{const{__scopeToast:r,...o}=e;return s.jsx(D.div,{...o,ref:t})});Xe.displayName=Or;var Ye="ToastAction",Qe=a.forwardRef((e,t)=>{const{altText:r,...o}=e;return r.trim()?s.jsx(Je,{altText:r,asChild:!0,children:s.jsx(ue,{...o,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Ye}\`. Expected non-empty \`string\`.`),null)});Qe.displayName=Ye;var Ze="ToastClose",ue=a.forwardRef((e,t)=>{const{__scopeToast:r,...o}=e,n=Dr(Ze,r);return s.jsx(Je,{asChild:!0,children:s.jsx(D.button,{type:"button",...o,ref:t,onClick:N(e.onClick,n.onClose)})})});ue.displayName=Ze;var Je=a.forwardRef((e,t)=>{const{__scopeToast:r,altText:o,...n}=e;return s.jsx(D.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":o||void 0,...n,ref:t})});function et(e){const t=[];return Array.from(e.childNodes).forEach(o=>{if(o.nodeType===o.TEXT_NODE&&o.textContent&&t.push(o.textContent),kr(o)){const n=o.ariaHidden||o.hidden||o.style.display==="none",c=o.dataset.radixToastAnnounceExclude==="";if(!n)if(c){const l=o.dataset.radixToastAnnounceAlt;l&&t.push(l)}else t.push(...et(o))}}),t}function X(e,t,r,{discrete:o}){const n=r.originalEvent.currentTarget,c=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&n.addEventListener(e,t,{once:!0}),o?Le(n,c):n.dispatchEvent(c)}var ve=(e,t,r=0)=>{const o=Math.abs(e.x),n=Math.abs(e.y),c=o>n;return t==="left"||t==="right"?c&&o>r:!c&&n>r};function Lr(e=()=>{}){const t=V(e);we(()=>{let r=0,o=0;return r=window.requestAnimationFrame(()=>o=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(o)}},[t])}function kr(e){return e.nodeType===e.ELEMENT_NODE}function Mr(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const n=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||n?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function te(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var Vr=$e,tt=Ge,rt=qe,st=ze,ot=Xe,nt=Qe,at=ue;const Br=Vr,it=a.forwardRef(({className:e,...t},r)=>s.jsx(tt,{ref:r,className:F("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));it.displayName=tt.displayName;const Wr=wt("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ct=a.forwardRef(({className:e,variant:t,...r},o)=>s.jsx(rt,{ref:o,className:F(Wr({variant:t}),e),...r}));ct.displayName=rt.displayName;const Kr=a.forwardRef(({className:e,...t},r)=>s.jsx(nt,{ref:r,className:F("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Kr.displayName=nt.displayName;const $r=a.forwardRef(({className:e,...t},r)=>s.jsx(at,{ref:r,className:F("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Et,{className:"h-4 w-4"})}));$r.displayName=at.displayName;const lt=a.forwardRef(({className:e,...t},r)=>s.jsx(st,{ref:r,className:F("text-sm font-semibold",e),...t}));lt.displayName=st.displayName;const dt=a.forwardRef(({className:e,...t},r)=>s.jsx(ot,{ref:r,className:F("text-sm opacity-90",e),...t}));dt.displayName=ot.displayName;const zr=({post:e})=>{const t=Rt(),{savedPosts:r}=bt(f=>f.feed),[o,n]=a.useState(!1),[c,l]=a.useState(!1),[d,p]=a.useState({title:"",description:""}),i=(f,y)=>{p({title:f,description:y}),l(!0)},m=r.some(f=>f.postId===e.postId||f.url===e.url),x=r.some(f=>(f.postId===e.postId||f.url===e.url)&&f.reported),E=r.some(f=>(f.postId===e.postId||f.url===e.url)&&f.shared),w=f=>new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),g=async()=>{if(!m)try{await t(It({postId:e.postId,title:e.title,url:e.url,content:e.content,source:e.source})).unwrap(),i("Success","Post saved successfully")}catch(f){i("Error",f.message||"Failed to save post")}},v=()=>{n(!0)},u=async f=>{try{await t(_t({postId:e.postId,title:e.title,url:e.url,content:e.content,source:e.source,reason:f})).unwrap(),i("Success","Post reported successfully")}catch(y){i("Error",y.message||"Failed to report post")}n(!1)},T=async()=>{if(!E)try{await t(Dt({postId:e.postId,title:e.title,url:e.url,content:e.content,source:e.source})).unwrap(),await navigator.clipboard.writeText(e.url),i("Success","Link copied to clipboard")}catch(f){i("Error",f.message||"Failed to share post")}};return s.jsxs(s.Fragment,{children:[s.jsxs(Br,{children:[s.jsxs(gt,{className:"mb-4 hover:shadow-md transition-shadow",children:[s.jsx(Tt,{children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(Ct,{className:"text-lg font-semibold",children:e.title}),s.jsx($t,{children:e.source})]})}),s.jsxs(Pt,{children:[s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2 line-clamp-3",children:e.content}),s.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-sm inline-flex items-center hover:underline",children:["Read more ",s.jsx(Ut,{className:"ml-1 h-4 w-4"})]})]}),s.jsxs(Nt,{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:["Posted on ",w(e.date||e.published_at)]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(H,{size:"icon",variant:m?"secondary":"ghost",onClick:g,disabled:m,title:"Save",children:s.jsx(St,{className:"h-4 w-4"})}),s.jsx(H,{size:"icon",variant:x?"secondary":"ghost",onClick:v,disabled:x,title:"Report",children:s.jsx(jt,{className:"h-4 w-4"})}),s.jsx(H,{size:"icon",variant:E?"secondary":"ghost",onClick:T,disabled:E,title:"Share",children:s.jsx(Ht,{className:"h-4 w-4"})})]})]})]}),c&&s.jsxs(ct,{onOpenChange:l,children:[s.jsx(lt,{children:d.title}),s.jsx(dt,{children:d.description})]}),s.jsx(it,{})]}),s.jsx(sr,{isOpen:o,onClose:()=>n(!1),onConfirm:u,post:e})]})};export{zr as F};
