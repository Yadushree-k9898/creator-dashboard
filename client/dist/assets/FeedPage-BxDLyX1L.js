import{d as g,u as N,j as e,B as j,q as $,G as D,H as E,R as F,r as S,C as L,a as M,b as V,c as k,I as z,J as R,K as T,M as b,N as p,O as A,P as Q}from"./index-BuDEJ90D.js";import{F as y}from"./FeedItem-C7xOVCQp.js";import{C as B,c as H,d as q,e as G,f as J,g as v,S as K}from"./select-BmvZIRbF.js";import{T as O,a as U,b as P,c as C}from"./textarea-C_4MB8ug.js";import{R as W}from"./refresh-cw-CUyEaiwu.js";const X=({totalItems:l,itemsPerPage:i=5})=>{const n=g(),{page:r}=N(t=>t.feed),a=Math.ceil(l/i);if(a<=1)return null;const d=t=>{t>=1&&t<=a&&(n(D(t)),window.scrollTo({top:0,behavior:"smooth"}))},x=()=>{let t=[];t.push(1);let o=Math.max(2,r-1),m=Math.min(a-1,r+1);o>2&&t.push("...");for(let h=o;h<=m;h++)t.push(h);return m<a-1&&t.push("..."),a>1&&t.push(a),t};return e.jsxs("div",{className:"flex items-center justify-center space-x-2 py-6",children:[e.jsx(j,{variant:"outline",size:"icon",onClick:()=>d(r-1),disabled:r===1,children:e.jsx(B,{className:"h-4 w-4"})}),x().map((t,o)=>t==="..."?e.jsx("span",{className:"px-2",children:"..."},`ellipsis-${o}`):e.jsx(j,{variant:t===r?"default":"outline",size:"sm",onClick:()=>d(t),className:"min-w-[32px]",children:t},`page-${t}`)),e.jsx(j,{variant:"outline",size:"icon",onClick:()=>d(r+1),disabled:r===a,children:e.jsx($,{className:"h-4 w-4"})}),e.jsxs("div",{className:"text-sm text-gray-500 ml-2",children:["Page ",r," of ",a]})]})},Y=()=>{const l=g(),{itemsPerPage:i}=N(r=>r.feed),n=r=>{l(E(parseInt(r,10)))};return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Show:"}),e.jsxs(H,{value:i.toString(),onValueChange:n,children:[e.jsx(q,{className:"w-[80px]",children:e.jsx(G,{placeholder:"5 items"})}),e.jsxs(J,{children:[e.jsx(v,{value:"5",children:"5"}),e.jsx(v,{value:"10",children:"10"}),e.jsx(v,{value:"15",children:"15"}),e.jsx(v,{value:"20",children:"20"})]})]}),e.jsx("span",{className:"text-sm text-gray-500",children:"per page"})]})},Z=()=>{const l=g(),{allPosts:i,loading:n,error:r,activeSource:a,page:d,itemsPerPage:x}=N(s=>s.feed),[t,o]=F.useState(""),m=s=>{l(A(s))},h=s=>{s.preventDefault(),a==="devto"&&l(p(t))},u=()=>{a==="reddit"?l(b()):a==="devto"&&l(p(t))},w=s=>{const I=(d-1)*x;return s.slice(I,I+x)},f=S.useMemo(()=>a==="all"?i:a==="reddit"?i.filter(s=>s.source==="Reddit"):a==="devto"?i.filter(s=>s.source==="Dev.to"):[],[i,a]),c=S.useMemo(()=>w(f),[f,d]);return e.jsx("div",{className:"space-y-4",children:e.jsxs(L,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(V,{children:"Content Feed"}),e.jsxs(j,{variant:"outline",size:"sm",onClick:u,disabled:n,children:[e.jsx(W,{className:"h-4 w-4 mr-1"}),"Refresh"]})]})}),e.jsx(k,{children:e.jsxs(O,{defaultValue:a,onValueChange:m,children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-4",children:[e.jsxs(U,{children:[e.jsx(P,{value:"all",children:"All"}),e.jsx(P,{value:"reddit",children:"Reddit"}),e.jsx(P,{value:"devto",children:"Dev.to"})]}),e.jsxs("form",{onSubmit:h,className:"flex w-full md:w-auto",children:[e.jsx(z,{placeholder:"Search Dev.to...",value:t,onChange:s=>o(s.target.value),className:"mr-2",disabled:a!=="devto"}),e.jsx(j,{type:"submit",variant:"secondary",disabled:a!=="devto"||n,children:e.jsx(K,{className:"h-4 w-4"})})]})]}),r&&e.jsx(R,{message:r}),n?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(T,{})}):e.jsxs(e.Fragment,{children:[e.jsx(C,{value:"all",className:"m-0",children:c.length>0?c.map(s=>e.jsx(y,{post:s},`${s.source}-${s.postId}`)):e.jsx("p",{className:"text-center py-8 text-gray-500",children:"No posts found"})}),e.jsx(C,{value:"reddit",className:"m-0",children:a!=="reddit"||c.length>0?c.map(s=>e.jsx(y,{post:s},`${s.source}-${s.postId}`)):e.jsx("p",{className:"text-center py-8 text-gray-500",children:"No Reddit posts found"})}),e.jsx(C,{value:"devto",className:"m-0",children:a!=="devto"||c.length>0?c.map(s=>e.jsx(y,{post:s},`${s.source}-${s.postId}`)):e.jsx("p",{className:"text-center py-8 text-gray-500",children:"No Dev.to posts found"})})]}),!n&&f.length>0&&e.jsxs("div",{className:"mt-6 flex flex-col md:flex-row justify-between items-center",children:[e.jsx(Y,{}),e.jsx(X,{totalItems:f.length,itemsPerPage:x})]})]})})]})})},_=({title:l,subtitle:i,action:n,className:r=""})=>e.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 ${r}`,children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:l}),i&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i})]}),n&&e.jsx("div",{className:"mt-3 sm:mt-0",children:n})]}),le=()=>{const l=g(),{allPosts:i,redditPosts:n,devtoPosts:r,savedPosts:a,redditLoading:d,devtoLoading:x,savedPostsLoading:t,redditError:o,devtoError:m,savedPostsError:h,activeSource:u,searchQuery:w}=N(s=>s.feed),f=d||x||t,c=o||m||h;return S.useEffect(()=>{u==="reddit"&&n.length===0?l(b()):u==="devto"&&r.length===0?l(p()):u==="all"&&(n.length===0&&l(b()),r.length===0&&l(p())),a.length===0&&l(Q())},[l,u]),f?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(T,{})}):c?e.jsx(R,{message:c}):e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx(_,{title:"Content Feed",subtitle:"Discover and interact with content from various platforms"}),e.jsx("div",{className:"mt-6",children:e.jsx(Z,{})})]})};export{le as default};
