import{j as e,C as h,u as C,r as m,a as g,b as u,c as f,U as P,A as L,d as E,f as O,F as U,e as _,L as $,B as v,g as A}from"./index-BuDEJ90D.js";import{C as y,a as V,b,L as R}from"./layout-dashboard-leaGRRcy.js";import{S as F,a as B}from"./scroll-area-CVH98j00.js";import{S as M}from"./textarea-C_4MB8ug.js";import H from"./SavedFeedPage-PzGJc9mw.js";import{R as w}from"./refresh-cw-CUyEaiwu.js";import"./FeedItem-C7xOVCQp.js";const j=({title:s,value:i,icon:d,description:l,className:n=""})=>e.jsxs(h,{className:`p-5 flex flex-col h-full transition-all duration-300 transform hover:translate-y-[-5px] hover:shadow-lg bg-white dark:bg-gray-800 ${n}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:s}),d&&e.jsx("div",{className:"text-primary transform transition-transform duration-300 hover:scale-110",children:d})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white animate-fadeIn",children:i}),l&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:l})]})]}),k=({value:s,max:i,label:d,className:l=""})=>{const n=Math.min(Math.round(s/i*100),100);return e.jsxs("div",{className:`w-full ${l} transition-all duration-300 transform hover:translate-x-1`,children:[d&&e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:d}),e.jsxs("span",{className:"text-sm font-medium text-primary",children:[n,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden",children:e.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-1000 ease-out",style:{width:`${n}%`}})})]})},Y=()=>{const{dashboard:s,loading:i,error:d}=C(a=>a.user),[l,n]=m.useState(!1);if(m.useEffect(()=>{const a=setTimeout(()=>{n(!0)},100);return()=>clearTimeout(a)},[]),i)return e.jsxs(h,{className:"transition-all duration-300 shadow-md hover:shadow-lg",children:[e.jsx(g,{children:e.jsxs(u,{className:"flex items-center",children:[e.jsx(y,{className:"mr-2 h-5 w-5 text-primary"}),"Credit Statistics"]})}),e.jsxs(f,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(4)].map((a,t)=>e.jsx("div",{className:"h-24 bg-gray-100 dark:bg-gray-800 animate-pulse rounded-md",style:{animationDelay:`${t*.1}s`}},t))}),e.jsx("div",{className:"mt-6 space-y-4",children:[...Array(3)].map((a,t)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"h-4 bg-gray-100 dark:bg-gray-800 animate-pulse rounded w-24"}),e.jsx("div",{className:"h-4 bg-gray-100 dark:bg-gray-800 animate-pulse rounded w-12"})]}),e.jsx("div",{className:"h-2.5 bg-gray-100 dark:bg-gray-800 animate-pulse rounded-full"})]},t))})]})]});if(d||!(s!=null&&s.creditStats))return e.jsxs(h,{className:"transition-all duration-300 shadow-md hover:shadow-lg animate-fadeIn",children:[e.jsx(g,{children:e.jsxs(u,{className:"flex items-center",children:[e.jsx(y,{className:"mr-2 h-5 w-5 text-primary"}),"Credit Statistics"]})}),e.jsx(f,{children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900/10 p-4 rounded-md border border-red-100 dark:border-red-900/20 text-red-800 dark:text-red-400",children:d||"Unable to load credit data. Please try again later."})})]});const o=s.creditStats,r={totalCredits:Number(o.totalCredits)||0,loginCredits:Number(o.loginCredits)||0,profileCredits:Number(o.profileCredits)||0,interactionCredits:Number(o.interactionCredits)||0},c=r.totalCredits||r.loginCredits+r.profileCredits+r.interactionCredits;return e.jsxs(h,{className:`transition-all duration-500 shadow-md hover:shadow-lg transform ${l?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}`,children:[e.jsx(g,{children:e.jsxs(u,{className:"flex items-center",children:[e.jsx(y,{className:"mr-2 h-5 w-5 text-primary"}),"Credit Statistics"]})}),e.jsxs(f,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsx(j,{title:"Total Credits",value:c,icon:e.jsx(y,{className:"h-5 w-5"}),description:"Your total earned credits",className:"border-t-4 border-primary"}),e.jsx(j,{title:"Login Credits",value:r.loginCredits,icon:e.jsx(V,{className:"h-5 w-5"}),description:"Credits earned from daily logins",className:"border-t-4 border-blue-500"}),e.jsx(j,{title:"Profile Credits",value:r.profileCredits,icon:e.jsx(P,{className:"h-5 w-5"}),description:"Credits from profile completion",className:"border-t-4 border-purple-500"}),e.jsx(j,{title:"Interaction Credits",value:r.interactionCredits,icon:e.jsx(L,{className:"h-5 w-5"}),description:"Credits from post interactions",className:"border-t-4 border-green-500"})]}),e.jsxs("div",{className:"space-y-5 mt-8",children:[e.jsx("h3",{className:"text-sm font-medium mb-3 text-gray-700 dark:text-gray-300 relative inline-block after:content-[''] after:absolute after:w-1/3 after:h-1 after:bg-primary/30 after:left-0 after:bottom-0",children:"Credit Breakdown"}),e.jsx(k,{value:r.loginCredits,max:c,label:"Login Credits",className:"mb-4"}),e.jsx(k,{value:r.profileCredits,max:c,label:"Profile Credits",className:"mb-4"}),e.jsx(k,{value:r.interactionCredits,max:c,label:"Interaction Credits"})]})]})]})},G=()=>{const s=E(),{recentActivity:i,loading:d,error:l}=C(a=>a.user),[n,o]=m.useState(!1);m.useEffect(()=>{s(O());const a=setTimeout(()=>{o(!0)},300);return()=>clearTimeout(a)},[s]);const r=a=>{var x;switch(((x=a==null?void 0:a.trim())==null?void 0:x.toUpperCase())||""){case"LOGIN":return e.jsx($,{className:"h-4 w-4"});case"PROFILE_COMPLETION":case"PROFILE_UPDATE":return e.jsx(_,{className:"h-4 w-4"});case"SAVED_POST":case"SAVE_POST":return e.jsx(B,{className:"h-4 w-4"});case"SHARED_POST":case"SHARE_POST":return e.jsx(M,{className:"h-4 w-4"});case"REPORTED_POST":case"REPORT_POST":return e.jsx(U,{className:"h-4 w-4"});default:return e.jsx(b,{className:"h-4 w-4"})}},c=a=>{if(!a)return"Unknown date";const t=new Date(a);return isNaN(t.getTime())?"Invalid date":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})};return l?e.jsxs(h,{className:"h-full transition-all duration-300 shadow-md hover:shadow-lg",children:[e.jsx(g,{className:"bg-gradient-to-r from-rose-50 to-rose-100 dark:from-rose-900/20 dark:to-rose-900/10 py-3",children:e.jsxs(u,{className:"flex items-center text-base sm:text-lg",children:[e.jsx(b,{className:"mr-2 h-5 w-5 text-rose-500"}),"Recent Activity"]})}),e.jsx(f,{className:"p-3",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900/10 p-4 rounded-md border border-red-100 dark:border-red-900/20 text-red-800 dark:text-red-400",children:l})})]}):e.jsxs(h,{className:`h-full transition-all duration-500 shadow-md hover:shadow-lg transform ${n?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}`,children:[e.jsx(g,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/10 py-3",children:e.jsxs(u,{className:"flex items-center text-base sm:text-lg",children:[e.jsx(b,{className:"mr-2 h-5 w-5 text-primary"}),"Recent Activity"]})}),e.jsx(f,{className:"p-3 flex flex-col h-[calc(100%-60px)] min-h-[300px]",children:d?e.jsx("div",{className:"space-y-2 flex-grow flex flex-col justify-center items-center",children:[...Array(5)].map((a,t)=>e.jsx("div",{className:"w-full animate-pulse",style:{animationDelay:`${t*.1}s`},children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),e.jsx("div",{className:"w-16 h-3 bg-gray-200 dark:bg-gray-700 rounded"})]})},t))}):e.jsx(F,{className:"h-full pr-2",children:e.jsx("div",{className:"space-y-2 animate-fadeIn",children:i&&i.length>0?i.map((a,t)=>{var x;return e.jsx("div",{className:"p-2 rounded-lg border border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 hover:shadow-sm group",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-primary/10 dark:bg-primary/20 text-primary group-hover:bg-primary/20 dark:group-hover:bg-primary/30 transition-colors",children:r(a.action)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:((x=a.action)==null?void 0:x.replace(/_/g," "))||"Activity"}),a.details&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:a.details}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:c(a.createdAt)})]})]})},t)}):e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400 animate-fadeIn",children:[e.jsx(b,{className:"h-12 w-12 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),e.jsx("p",{children:"No recent activity found"})]})})})})]})},Z=()=>{const s=E(),{dashboard:i,loading:d,error:l,dashboardLoaded:n}=C(S=>S.user),[o,r]=m.useState("light"),[c,a]=m.useState(!1),[t,x]=m.useState(!1);m.useEffect(()=>{(async()=>{n||await s(A())})();const D=setTimeout(()=>{x(!0)},100),N=window.matchMedia("(prefers-color-scheme: dark)"),T=I=>r(I.matches?"dark":"light");return r(N.matches?"dark":"light"),N.addEventListener("change",T),()=>{N.removeEventListener("change",T),clearTimeout(D)}},[s,n]);const p=()=>{a(!0),s(A()).finally(()=>{setTimeout(()=>a(!1),600)})};return d&&!n?e.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-4rem)] bg-gray-100 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-primary border-opacity-60"})}):l?e.jsxs("div",{className:"max-w-lg mx-auto mt-8 bg-red-100 dark:bg-red-900/20 border-l-4 border-red-500 text-red-700 dark:text-red-400 p-6 rounded-lg shadow-md",children:[e.jsx("p",{className:"font-bold text-lg",children:"Error"}),e.jsx("p",{children:l}),e.jsxs(v,{variant:"outline",className:"mt-4 border-red-300 hover:bg-red-50 text-red-600",onClick:p,children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Try Again"]})]}):i?e.jsx("div",{className:`min-h-[calc(100vh-4rem)] w-full px-3 sm:px-4 py-4 transition-colors duration-300 ${o==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-800"}`,children:e.jsxs("div",{className:`max-w-7xl mx-auto space-y-6 transition-all duration-500 ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight text-gray-900 dark:text-white flex items-center",children:[e.jsx("span",{className:"bg-primary/10 dark:bg-primary/20 p-2 rounded-lg mr-3",children:e.jsx(R,{className:"h-6 w-6 text-primary"})}),"Your Dashboard"]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:"Track your activity, credits, and saved content"})]}),e.jsxs(v,{onClick:p,variant:"outline",className:"flex items-center gap-2",disabled:c,children:[e.jsx(w,{className:`h-4 w-4 ${c?"animate-spin":""}`}),c?"Refreshing...":"Refresh"]})]}),e.jsx(Y,{creditStats:i.creditStats}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden h-[500px] sm:h-[600px]",children:e.jsx(H,{})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden h-[500px] sm:h-[600px]",children:e.jsx(G,{})})]})]})}):e.jsxs("div",{className:"text-center p-12 text-gray-500 dark:text-gray-300",children:[e.jsx(R,{className:"h-16 w-16 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),e.jsx("p",{className:"text-lg",children:"No dashboard data available."}),e.jsxs(v,{variant:"outline",className:"mt-4",onClick:p,children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})};export{Z as default};
